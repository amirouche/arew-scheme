
## `(http)`

- https://tools.ietf.org/html/rfc7230

### Issues

- The generators / accumulators might raise connection close or in the
  case of the generator return eof. There should be a standard way to
  handle that case.

### `(http-error? obj)`

Returns `#t` if `OBJ` is an HTTP error. Otherwise, it returns `#f`.

### `(http-error-message OBJ)`

Return a human readable string describing the error.

### `(http-error-payload OBJ)`

Return an object that can help understand the error or possibly
workaround it.

### `(http-request-line-read generator)`

`GENERATOR` must generate one byte at a time.  `http-request-line-read`
returns three values:

1. A string representing the HTTP method
2. A string representing the URI
3. A pair of numbers representing the HTTP version

When this procedure returns, `GENERATOR` is positioned after the
request line, at the first byte of headers or in the case when there
is no headers, upon a return byte.

### `(http-response-line-read generator)`

`GENERATOR` must generate one byte at a time.  `http-response-line-read`
returns two, possibly three values:

1. A pair of numbers representing the HTTP version,
2. A number representing the status code,
3. Possibly a third and last string object representing the reason.

When this procedure returns, `GENERATOR` is positioned after the
response line, at the first byte of headers or in the case where there
is no headers, upon a return byte.

**Note:** This procedure will read what is called "status line" in
RFCXYZ.

### `(http-headers-read generator)`

`GENERATOR` must generate one byte at a time.  `http-headers-read`
returns an association list of string key-value pairs, where string
values have space trimmed both on the left and on the right.

### `(http-chunks-generator generator)`

`GENERATOR` must return one byte at a time. This procedure returns a
generator that follows the protocol:

Each chunk is generated as two values. The first value is the chunk
extensions as a string that is possibly the empty string and the
second value is a generator of the bytes the current chunk.

After consuming all generators generated by the generator returned by
`http-chunks-generator` it is necessary to call `http-headers-read` to
consume the end of `GENERATOR` that will possibly yield trailing
headers and will qposition `GENERATOR` at the end of the request or
response.
   
### `(http-chunked-body-generator generator)`

`GENERATOR` must return one byte at a time. This procedure returns a
generator that generates one byte at a time of a chunked body. It will
ignore chunk extensions and trailing headers.

### `(http-request-line-write accumulator method uri version)`

TODO

### `(http-response-line-write accumulator method uri version)`

TODO

### `(http-headers-write accumulator headers)`

TODO

### `(http-chunks-accumulator accumulator length)`

TODO

### `(http-request-read generator)`

TODO

### `(http-request-write accumulator method uri version headers body)`

TODO

### `(http-response-read generator)`

TODO

### `(http-response-write accumulator version status reason headers body)`

TODO
